<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Scofield Analista</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #fff; color: #000; }
  .container { display: flex; gap: 20px; margin-bottom: 20px; }
  .pedra { width: 120px; border: 2px solid #ccc; border-radius: 10px; padding: 10px; text-align: center; }
  .cor-quadrado { font-size: 60px; cursor: pointer; user-select: none; }
  label, input { display: block; width: 100%; margin-top: 5px; }
  input[type=number], input[type=time] { font-size: 16px; padding: 5px; border-radius: 5px; border: 1px solid #aaa; }
  button { margin: 10px 5px 0 0; padding: 10px 20px; font-size: 16px; cursor: pointer; }
  #resultado { margin-top: 20px; font-weight: bold; font-size: 18px; color: #d63031; }
  #log { margin-top: 20px; max-height: 250px; overflow-y: auto; background: #f9f9f9; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 14px; }
</style>
</head>
<body>

<h2>Scofield Analista</h2>

<div class="container">
  <div class="pedra" id="esquerda">
    <div class="cor-quadrado" id="cor-esq">üî¥</div>
    <label for="num-esq">N√∫mero (0-14)</label>
    <input type="number" id="num-esq" min="0" max="14" />
    <label for="hora-esq">Hor√°rio</label>
    <input type="time" id="hora-esq" />
  </div>

  <div class="pedra" id="meio">
    <div style="font-size: 70px; user-select:none;">üî•</div>
    <label for="hora-meio">Hor√°rio Branco</label>
    <input type="time" id="hora-meio" />
  </div>

  <div class="pedra" id="direita">
    <div class="cor-quadrado" id="cor-dir">üî¥</div>
    <label for="num-dir">N√∫mero (0-14)</label>
    <input type="number" id="num-dir" min="0" max="14" />
    <label for="hora-dir">Hor√°rio</label>
    <input type="time" id="hora-dir" />
  </div>
</div>

<button id="btn-salvar">Salvar Resultado</button>
<button id="btn-analisar">Analisar</button>
<button id="btn-limpar">Limpar Hist√≥rico</button>

<div id="resultado"></div>
<div id="log"></div>

<script>
  // Cores poss√≠veis para as pedras (exceto a branca que √© fixa)
  const cores = ['vermelho', 'preto'];

  // √çndices atuais para as cores dos quadrados
  let corEsqIndex = 0; 
  let corDirIndex = 0;

  // Pega os elementos dos quadrados que representam as cores
  const corEsqDiv = document.getElementById('cor-esq');
  const corDirDiv = document.getElementById('cor-dir');

  // Fun√ß√£o para atualizar o emoji e a cor, baseado no √≠ndice
  function atualizarCor(div, index) {
    if(cores[index] === 'vermelho') {
      div.textContent = 'üî¥';
      div.style.color = '#c0392b';
    } else {
      div.textContent = '‚ö´';
      div.style.color = '#000';
    }
  }

  // Inicializa cores no carregamento
  atualizarCor(corEsqDiv, corEsqIndex);
  atualizarCor(corDirDiv, corDirIndex);

  // Evento clique para alternar a cor esquerda
  corEsqDiv.addEventListener('click', () => {
    corEsqIndex = (corEsqIndex + 1) % cores.length;
    atualizarCor(corEsqDiv, corEsqIndex);
  });

  // Evento clique para alternar a cor direita
  corDirDiv.addEventListener('click', () => {
    corDirIndex = (corDirIndex + 1) % cores.length;
    atualizarCor(corDirDiv, corDirIndex);
  });

  // Array para guardar os resultados salvos
  let resultados = JSON.parse(localStorage.getItem('resultados')) || [];

  // Fun√ß√£o para salvar resultado no localStorage
  function salvarResultado() {
    const numEsq = parseInt(document.getElementById('num-esq').value);
    const horaEsq = document.getElementById('hora-esq').value;
    const horaMeio = document.getElementById('hora-meio').value;
    const numDir = parseInt(document.getElementById('num-dir').value);
    const horaDir = document.getElementById('hora-dir').value;

    // Valida√ß√£o simples
    if (
      isNaN(numEsq) || numEsq < 0 || numEsq > 14 ||
      isNaN(numDir) || numDir < 0 || numDir > 14 ||
      !horaEsq || !horaMeio || !horaDir
    ) {
      alert('Por favor, preencha todos os campos corretamente.');
      return;
    }

    // Monta o objeto com o resultado
    const resultado = {
      esquerda: { cor: cores[corEsqIndex], numero: numEsq, horario: horaEsq },
      meio: { cor: 'branco', horario: horaMeio },
      direita: { cor: cores[corDirIndex], numero: numDir, horario: horaDir }
    };

    resultados.push(resultado);
    localStorage.setItem('resultados', JSON.stringify(resultados));
    atualizarLog();
    limparCampos();
    document.getElementById('resultado').textContent = '';
  }

  // Atualiza a √°rea de log na tela com os resultados salvos
  function atualizarLog() {
    const logDiv = document.getElementById('log');
    if(resultados.length === 0) {
      logDiv.innerHTML = '<p>Nenhum resultado salvo.</p>';
      return;
    }
    let html = '';
    resultados.forEach((r,i) => {
      html += `<p><strong>#${i+1}</strong> Esquerda: ${r.esquerda.cor} ${r.esquerda.numero} √†s ${r.esquerda.horario} | Branco √†s ${r.meio.horario} | Direita: ${r.direita.cor} ${r.direita.numero} √†s ${r.direita.horario}</p>`;
    });
    logDiv.innerHTML = html;
  }

  // Limpa os inputs para novo cadastro
  function limparCampos() {
    document.getElementById('num-esq').value = '';
    document.getElementById('hora-esq').value = '';
    document.getElementById('hora-meio').value = '';
    document.getElementById('num-dir').value = '';
    document.getElementById('hora-dir').value = '';
  }

  // Converte hora "HH:MM" em minutos totais para facilitar c√°lculo
  function horaParaMinutos(hora) {
    const [h,m] = hora.split(':').map(Number);
    return h * 60 + m;
  }

  // Converte minutos totais em hora "HH:MM"
  function minutosParaHora(min) {
    const h = String(Math.floor(min / 60)).padStart(2, '0');
    const m = String(min % 60).padStart(2, '0');
    return `${h}:${m}`;
  }

  // Fun√ß√£o de an√°lise simples: prev√™ pr√≥ximo branco somando m√©dia dos intervalos
  function analisar() {
    if(resultados.length < 2) {
      alert('Precisa de pelo menos 2 resultados para analisar.');
      return;
    }
    const brancos = resultados.map(r => horaParaMinutos(r.meio.horario)).sort((a,b) => a-b);
    let intervalos = [];
    for(let i=1; i<brancos.length; i++) {
      intervalos.push(brancos[i] - brancos[i-1]);
    }
    const mediaIntervalo = intervalos.reduce((a,b) => a+b, 0) / intervalos.length;
    const ultimoBranco = brancos[brancos.length - 1];
    const previsto = Math.round(ultimoBranco + mediaIntervalo);
    const previstoHora = minutosParaHora(previsto);
    document.getElementById('resultado').textContent = `üïì PR√ìXIMO BRANCO PROV√ÅVEL EM ${previstoHora} ‚Äî PREPARA!`;
  }

  // Limpa todo hist√≥rico salvo
  function limparHistorico() {
    if(confirm('Tem certeza que deseja limpar todo o hist√≥rico?')) {
      resultados = [];
      localStorage.removeItem('resultados');
      atualizarLog();
      document.getElementById('resultado').textContent = '';
    }
  }

  // Eventos dos bot√µes
  document.getElementById('btn-salvar').addEventListener('click', salvarResultado);
  document.getElementById('btn-analisar').addEventListener('click', analisar);
  document.getElementById('btn-limpar').addEventListener('click', limparHistorico);

  // Atualiza log na inicializa√ß√£o
  atualizarLog();

</script>

</body>
</html>
